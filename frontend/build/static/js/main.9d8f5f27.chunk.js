(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{329:function(e,t,a){e.exports=a(622)},334:function(e,t,a){},335:function(e,t,a){},340:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},492:function(e,t,a){},518:function(e,t){},524:function(e,t,a){},531:function(e,t,a){},574:function(e,t,a){},575:function(e,t,a){},619:function(e,t,a){},622:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(41),i=a.n(o),l=(a(334),a(56)),s=(a(335),a(34)),c=a(35),u=a(37),p=a(36),d=a(38),m=a(12),f=a(653),h=a(623),g=a(632),v=a(642),b=a(638),E=a(637),y=a(641),O=a(625),k=a(60),w=(a(340),a(8)),j=a.n(w),x=a(11),C="GET_SOME_DATA",D=a(18),S=a.n(D),T=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("/some-api-route");case 2:a({type:C,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=a(45),I=a(119),P=a(645),L="SET_CURRENT_ROUTE",N="GET_NOTIFICATIONS",A="GET_SINGLE_NOTIFICATION",_="READ_NOTIFICATIONS",M="READ_MESSAGES",F="GET_UNREAD_MESSAGE",G=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("messages"!=e){t.next=4;break}return a(U()),t.next=4,S.a.get("/api/users/read-messages");case 4:if("notifications"!=e){t.next=10;break}return a(z()),t.next=8,S.a.get("/api/users/read-notifications");case 8:t.next=11;break;case 10:a({type:L,payload:e});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/users/notifications");case 2:a=e.sent,t({type:N,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(){return function(e){e({type:_})}},U=function(){return function(e){e({type:M})}},q="CHANGE_FILTERS",W="GET_LEFT_DETAILS",V=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/users/left-details");case 3:a=e.sent,t({type:W,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_ERRORS",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Y=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:q,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=h.a.Sider,K=I.a.SubMenu,J=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getLeftDetails()}},{key:"render",value:function(){var e=this,t=this.props.profileDetails,a=t.following,n=t.followers,o=t.achievements,i=t.donations,l=t.name,s=t.avatar,c=n.length?n.map((function(t){return r.a.createElement(R.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(I.a.Item,{key:t._id,style:{paddingLeft:"36px",marginBottom:"10px"}},r.a.createElement(E.a,{size:25,src:t.avatar,style:{backgroundColor:"#87d068",marginRight:"4px"}}),t.name))})):r.a.createElement(I.a.Item,{key:"1"}," No followers yet! "),u=a.length?a.map((function(t){return r.a.createElement(R.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(I.a.Item,{key:t._id,style:{paddingLeft:"36px",marginBottom:"10px"}},r.a.createElement(E.a,{size:25,src:t.avatar,style:{backgroundColor:"#87d068",marginRight:"4px"}}),t.name))})):r.a.createElement(I.a.Item,{key:"1"}," You are not following anyone! "),p=(null===i||void 0===i?void 0:i.length)?i.map((function(e){return console.log("inside the donation list",e),r.a.createElement(I.a.Item,{key:e._id},e.title)})):r.a.createElement(I.a.Item,{key:"1"}," No donations yet! ");(null===o||void 0===o?void 0:o.length)?o.map((function(e){return r.a.createElement(I.a.Item,{key:e.id},e.title)})):I.a.Item;return r.a.createElement(B,{width:280,className:"site-layout-background",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"40px"}},r.a.createElement(I.a,{mode:"inline",defaultOpenKeys:["sub5"],style:{height:"100%",borderRight:0,paddingTop:"40px"}},r.a.createElement(I.a.Item,{key:"Sub1",style:{fontSize:"16px",marginBlock:"10px"}},r.a.createElement(R.b,{to:"/profile/".concat(this.props.profileDetails._id)}),r.a.createElement(y.b,null,r.a.createElement(E.a,{size:36,src:s,style:{backgroundColor:"#87d068"},icon:r.a.createElement(P.a,null)}),l)),r.a.createElement(K,{key:"sub2",title:"Followers",style:{fontSize:"16px"}},c),r.a.createElement(K,{key:"sub3",title:"Following",style:{fontSize:"16px"}},u),r.a.createElement(K,{key:"sub4",title:"Recent Donations",style:{fontSize:"16px"}},p)))}}]),a}(n.Component),X=Object(d.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{changeFilters:Object(m.b)(Y,e),getLeftDetails:Object(m.b)(V,e),setCurrentRoute:Object(m.b)(G,e)}}))(J),Z=(a(372),a(634)),$=a(648),Q=a(649),ee=a(650),te=a(651),ae=a(652),ne=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/posts/");case 2:a=e.sent,t({type:"GET_POST",payload:a.data.posts,allcomments:a.data.allcomments,avatars:a.data.avatars});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},re=function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n){var r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("this is the like thing",e,t),r=t?-1:1,a.next=4,S.a.post("/api/posts/like",{id:e,value:r});case 4:o=a.sent,console.log("lets see thevalue here",o.data),n({type:"CHANGE_LIKE",payload:o.data.post});case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},oe=a(43),ie=a.n(oe),le=a(631),se=a(633),ce=a(630),ue=a(646),pe=(a(373),function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("/api/posts/create",{post:e});case 2:n=t.sent,a({type:"ADD_POST",post:n.data.post,comment:n.data.comment});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),de="GET_SOME_DATA",me="GET_SUGGESTED_PAGES",fe="CHANGE_TAB",he="GET_PROFILE",ge="UPDATE_PROFILE_PIC",ve="GET_FOLLOWERS",be="GET_FOLLOWING",Ee=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("../../api/donation/accept",{_id:e._id});case 2:a({type:"ACCEPT_DONATION",payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ye=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("/some-api-route");case 2:a({type:de,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("/api/users/addhistory",{history:e});case 2:n=t.sent,a({type:"ADD_HISTORY",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ke=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/users/profile/".concat(e));case 3:n=t.sent,a({type:he,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},we=function(e,t,a){return function(){var n=Object(x.a)(j.a.mark((function n(r){var o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("rating is:",t),console.log("donationid is:",a),n.next=4,S.a.post("/api/users/addfed",{value:e,rating:t,donationId:a});case 4:o=n.sent,console.log("add fed data is; ",o.data),r({type:"ADD_FED",payload:o.data});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},je=function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t,e),a.next=3,S.a.post("/api/users/review",{id:e,rating:t});case 3:r=a.sent,console.log("After reviewing the Organisation",r.body),n({type:"REVIEW",payload:r.data});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},xe=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t,a){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a().authReducer.user.userId,r=function(e){return 0==e.status.localeCompare("pending")&&e.receiverId==n},o=a().DiscoverReducer.Donations.filter(r),t({type:"GET_PENDING_DONATION",payload:o});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Ce=function(e){return function(t){t({type:fe,payload:e})}},De=function(e,t){return function(a){a({type:ge,payload:{profilePic:e,avatar:t}})}},Se=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/users/follow/".concat(e));case 3:n=t.sent,a({type:he,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Te=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/users/unfollow/".concat(e));case 3:n=t.sent,a({type:he,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Re=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/users/followers/".concat(e));case 3:n=t.sent,a({type:ve,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Ie=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/users/following/".concat(e));case 3:n=t.sent,a({type:be,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Pe=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("/api/donation/reject",{_id:e});case 3:n=t.sent,console.log(n.data),a({type:"REJECT_DONATION",id:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Le=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("/api/users/edit-profile",{user:e});case 3:n=t.sent,a({type:he,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Ne=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},Ae=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.name,description:"",files:[]},e.addpost=function(t){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location})),r={author:e.state.user,description:t.description,likes:[],liked:!1,noOfLikes:0,DateTime:ie()().format("HH:mm ll"),imageUrl:n};e.props.addPost(r);var o={color:"blue",icon:"dot",text:r.description+" ( Posted on "+r.DateTime+" )"};e.props.addHistory(o)},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,{visible:this.props.visible,maskClosable:!1,destroyOnClose:!0,title:"Share your Thoughts",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(k.a,{form:"post-form",key:"submit",type:"primary",htmlType:"submit",loading:this.props.loading},"Post")]},r.a.createElement(le.a,{id:"post-form",name:"validate_other",layout:"Vertical",onFinish:this.addpost},r.a.createElement(le.a.Item,{name:"description",width:500,rules:[{required:!0,message:"Please Enter Items details"}]},r.a.createElement(se.a.TextArea,{placeholder:"Express your thoughts",autoSize:{minRows:2,maxRows:6}})),r.a.createElement(le.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:Ne,noStyle:!0},r.a.createElement(ce.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var e=Object(x.a)(j.a.mark((function e(t){var a,n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,n=t.onSuccess,r=t.onError,(o=new FormData).append("file",a),e.next=5,S.a.post("/upload/posts",o).then((function(e){n(e.data)})).catch((function(e){console.log("error in uploading"),r("Error in uploading.Try again")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ue.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))}}]),a}(n.Component),_e=Object(d.b)((function(e){return{name:e.LeftSidePanelReducer.profileDetails.name}}),(function(e){return{addHistory:Object(m.b)(Oe,e),addPost:Object(m.b)(pe,e)}}))(Ae),Me=a(624),Fe=function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e,a.next=3,S.a.post("/api/comment/add/".concat(e),{content:t.content});case 3:n({type:"ADD_COMMENT",id:e,comment:t});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ge=se.a.TextArea,He=function(e){var t=e.comments;return r.a.createElement(v.b,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(Me.a,e)}})},ze=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a.Item,null,r.a.createElement(Ge,{rows:2,onChange:t,value:o})),r.a.createElement(le.a.Item,null,r.a.createElement(k.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"Add Comment")))},Ue=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={submitting:!1,value:""},e.handleSubmit=function(t){if(e.state.value){var a=e.state.value;e.setState({submitting:!0}),setTimeout((function(){var t={author:"Arpit Bandejiya",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:a,datetime:ie()().fromNow()};e.props.addComment(e.props.id,t)}),1e3),e.setState({submitting:!1,value:""})}},e.handleChange=function(t){e.setState({value:t.target.value})},e}return Object(c.a)(a,[{key:"render",value:function(){if(this.props.id){var e=this.state,t=e.submitting,a=e.value,n=this.props.postComments[0].comments;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{visible:this.props.visible,title:"Comments",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:this.props.loading,onClick:this.props.handleOk},"DOne")]},n.length>0&&r.a.createElement(He,{comments:n}),r.a.createElement(Me.a,{avatar:r.a.createElement(E.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:r.a.createElement(ze,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:t,value:a})})))}return null}}]),a}(r.a.Component),qe=Object(d.b)((function(e,t){var a=t.id;return{postComments:e.HomeCenterReducer.postComments.filter((function(e){return e.postId===a}))}}),(function(e){return{addComment:Object(m.b)(Fe,e)}}))(Ue),We=a(191),Ve=a(635),Ye=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:"diamond",loading:!1},e.onChange=function(t){console.log("radio checked",t.target.value),e.setState({value:t.target.value})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.value,a={display:"block",height:"30px",lineHeight:"30px"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{title:r.a.createElement("b",null,"Awards"),visible:this.props.visible,onCancel:this.props.hideModal,okText:"Payment",cancelText:"Cancel",footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.hideModal},"Cancel"),r.a.createElement(k.a,{loading:this.state.loading,key:"submit",type:"primary",onClick:Object(x.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("post",e.props.currentPostid,"value",e.state.value),e.setState({loading:!0}),console.log("Start loading"),t.next=5,S.a.post("/api/users/giveAward",{postId:e.props.currentPostid,awardType:e.state.value});case 5:console.log("end loading"),e.setState({loading:!1}),e.props.hideModalS();case 8:case"end":return t.stop()}}),t)})))},"Pay Now")]},r.a.createElement("div",null,r.a.createElement("b",null," Please select the award you want to Buy ?"),r.a.createElement("br",null),r.a.createElement(We.a.Group,{onChange:this.onChange,value:t},r.a.createElement(We.a,{style:a,value:"diamond"},r.a.createElement(E.a,{size:"small",src:"/images/awards/diamond.jpg"})," Diamond, Cost : 150, Will help us to feed 3 childern."),r.a.createElement(We.a,{style:a,value:"gold"},r.a.createElement(E.a,{size:"small",src:"/images/awards/gold.jpg"}),"Gold, Cost : 100, Will help us to feed 2 childern."),r.a.createElement(We.a,{style:a,value:"silver"},r.a.createElement(E.a,{size:"small",src:"/images/awards/silver.jpg"}),"Silver, Cost : 50, Will help us to feed 1 childern.")))),r.a.createElement(g.a,{title:"Payment",visible:this.props.visiblepay,onOk:this.props.hideModalB,onCancel:this.props.hideModalP,okText:"Buy Again",cancelText:"Close"},r.a.createElement(Ve.a,{status:"success",title:"Successfully Purchased Award",subTitle:"You can veiw awards on User's Profile"})))}}]),a}(n.Component),Be=a(647);function Ke(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"50px"}},r.a.createElement(Be.a,null))}var Je=h.a.Content,Xe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,visible:!1,loadingComments:!1,visibleComments:!1,currentPostid:null,profilePageLoading:!1,visibleawards:!1,visiblepayment:!1},e.showModal=function(){e.setState({visible:!0})},e.startModalComments=function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({currentPostid:a});case 2:e.setState({visibleComments:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModalComments=function(){e.setState({visibleComments:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),500),g.a.success({content:"Post Shared"})},e.handleOkComments=function(){e.setState({loadingComments:!0}),setTimeout((function(){e.setState({loadingComments:!1,visibleComments:!1})}),100)},e.handleCancel=function(){e.setState({visible:!1})},e.handleCancelComments=function(){e.setState({visibleComments:!1})},e.showModalawards=function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({currentPostid:a});case 2:e.setState({visibleawards:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.hideModalawards=function(){e.setState({visibleawards:!1})},e.hideModalSawards=function(){e.setState({visibleawards:!1,visiblepayment:!0})},e.hideModalP=function(){e.setState({visiblepayment:!1})},e.hideModalB=function(){e.setState({visiblepayment:!1,visibleawards:!0})},e.Liked=function(t){return void 0!=t.find((function(t){return t==e.props.user.userId}))},e.incrementLike=function(t,a,n){console.log(e.props.user.userId);var r=e.Liked(n);e.props.changelike(t,r)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getPost();case 3:this.props.getNotifications(),this.setState({profilePageLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.visibleawards,o=t.loading,i=t.visiblepayment,l=t.visibleComments,s=t.loadingComments,c=this.props.posts,u=c.length?c.map((function(t){return r.a.createElement(b.a,{title:r.a.createElement(R.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t.authorId._id)},r.a.createElement(E.a,{src:t.authorId.avatar,alt:"Han Solo",style:{margin:"8px"}}),t.author),extra:t.DateTime,style:{width:700,margin:"8px"},actions:[r.a.createElement("div",{onClick:function(a){return e.incrementLike(t._id,t.liked,t.likes)}},(n=e.Liked(t.likes),n?r.a.createElement($.a,{key:"Like",style:{margin:"8px"}}):r.a.createElement(Q.a,{key:"Like",style:{margin:"8px"}})),t.noOfLikes),r.a.createElement("div",null,r.a.createElement(ee.a,{hoverable:!0,onClick:function(){return e.startModalComments(t._id)},key:"Comment",style:{margin:"8px"}})," "),r.a.createElement("div",null,r.a.createElement(te.a,{key:"Award",onClick:function(){return e.showModalawards(t._id)},style:{margin:"8px"}})," ")]},r.a.createElement("p",null,t.description),r.a.createElement(y.b,null,void 0==(a=t.imageUrl)?r.a.createElement("div",null,"No images!"):a.length?a.map((function(e){return r.a.createElement(Z.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null,"No images!")));var a,n})):r.a.createElement("div",null," No post are here! ");return this.state.profilePageLoading?r.a.createElement(Ke,null):r.a.createElement(Je,{style:{margin:"auto"}},r.a.createElement(b.a,{style:{width:700,margin:"8px"},hoverable:!0,onClick:this.showModal},r.a.createElement("p",{className:"cardtext"}," ",r.a.createElement(ae.a,null)," Share something with the community")),r.a.createElement(_e,{handleCancel:this.handleCancel,handleOk:this.handleOk,showModal:this.showModal,visible:a,loading:o}),r.a.createElement(qe,{id:this.state.currentPostid,handleCancel:this.handleCancelComments,handleOk:this.handleOkComments,showModal:this.showModalComments,visible:l,loading:s}),r.a.createElement(Ye,{currentPostid:this.state.currentPostid,hideModal:this.hideModalawards,hideModalB:this.hideModalB,hideModalP:this.hideModalP,hideModalS:this.hideModalSawards,visible:n,visiblepay:i}),u)}}]),a}(n.Component),Ze=Object(d.b)((function(e){return{posts:e.HomeCenterReducer.posts,user:e.authReducer.user}}),(function(e){return{changelike:Object(m.b)(re,e),getPost:Object(m.b)(ne,e),setCurrentRoute:Object(m.b)(G,e),getNotifications:Object(m.b)(H,e)}}))(Xe),$e=h.a.Sider;function Qe(){g.a.info({title:"Awards",content:r.a.createElement("div",null,r.a.createElement("p",null,"nofoodWasted awards are an innovative way to show support for your favourite users while also supporting the fight for food security! These awards are highlighted on users profile, giving their cause legitimacy while at the same time money spent on these goes to feed someone.")," Join our cause, buy nofoodWasted awards now!"),onOk:function(){}})}function et(){g.a.info({title:"Food4all",content:r.a.createElement("div",null,r.a.createElement("p",null,"A new community-led platform to highlight local food security programs and connect donors to them, making the process convenient.")),onOk:function(){}})}function tt(){g.a.info({title:"Please refer to Documentation",onOk:function(){}})}function at(){g.a.info({title:"Reach out to us at any of the below email address :",content:r.a.createElement("div",null,r.a.createElement("p",null,"Dinkar     - cs18b010@iittp.ac.in"),r.a.createElement("p",null,"Arpit      - cs18b003@iittp.ac.in"),r.a.createElement("p",null,"Sudheesh    - cs18b020@iittp.ac.in"),r.a.createElement("p",null,"Shreyansh  - cs18b042@iittp.ac.in")),onOk:function(){}})}var nt,rt=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={someStateVariable:"hi"},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(X,null),r.a.createElement(h.a,{style:{marginTop:"64px"}},r.a.createElement(Ze,null)),r.a.createElement($e,{width:300,style:{padding:"25px",marginTop:"48px",right:0,position:"fixed",height:"100vh"}},r.a.createElement(v.b,{itemLayout:"horizontal",header:r.a.createElement("div",{style:{fontWeight:"bolder",padding:"5px",fontSize:"medium"}},"Saved events"),renderItem:function(e){return r.a.createElement(v.b.Item,null,r.a.createElement(v.b.Item.Meta,null))}}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(b.a,{size:"small",style:{width:200,marginLeft:25},bodyStyle:{color:"#97033e",fontWeight:"bold"},bordered:!1,actions:[r.a.createElement("p",{onClick:Qe},r.a.createElement(f.a,{hoverable:!0,key:"learnMoreAwards"})," Learn more ")]},r.a.createElement("p",null,r.a.createElement(E.a.Group,null,r.a.createElement(E.a,{size:"small",src:"/images/awards/silver.jpg"}),r.a.createElement(E.a,{size:"large",src:"/images/awards/gold.jpg"}),r.a.createElement(E.a,{size:64,src:"/images/awards/diamond.jpg"}),r.a.createElement(E.a,{size:"large",src:"/images/awards/gold.jpg"}),r.a.createElement(E.a,{size:"small",src:"/images/awards/silver.jpg"})),"NofoodWasted awards are the best way to show your appreciation for work of other users!"))),r.a.createElement("div",{style:{marginTop:"64px",marginLeft:0}},r.a.createElement(y.b,{split:r.a.createElement(O.a,{type:"vertical",style:{color:"black",paddingLeft:"5px"}})},r.a.createElement(k.a,{onClick:et,type:"link"},"About"),r.a.createElement(k.a,{onClick:tt,type:"link"},"Help"),r.a.createElement(k.a,{onClick:at,type:"link"},"Contact us")))))}}]),a}(n.Component),ot=Object(d.b)((function(e){return{someData:e.homeReducer.someData}}),(function(e){return{getSomeData:Object(m.b)(T,e)}}))(rt),it=a(324),lt=a(636),st=a(655),ct=a(656),ut=a(657),pt=a(658),dt=a(659),mt=a(660),ft=a(661),ht=(a(492),function(e){e?S.a.defaults.headers.common.Authorization=e:delete S.a.defaults.headers.common.Authorization}),gt=a(180),vt="GET_ERRORS",bt="USER_LOADING",Et="SET_CURRENT_USER",yt="CLEAR_ERRORS",Ot=a(305),kt=a.n(Ot),wt="GET_THREADS",jt="UPDATE_THREAD",xt=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/message/getThreads");case 3:a=e.sent,t({type:wt,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_ERRORS",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Ct=function(e){return function(t){t({type:jt,payload:e})}},Dt=function(e,t,a){return function(){var n=Object(x.a)(j.a.mark((function n(r){var o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post("/api/message/send",{threadId:e,body:t,type:a});case 3:o=n.sent,r({type:jt,payload:o.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:"GET_ERRORS",payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},St=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("/api/message/new-thread",{receiver:e});case 3:n=t.sent,a({type:jt,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Tt=a(306),Rt=a(229),It=a(307),Pt=a.n(It),Lt=a(9),Nt={someData:"initilProp"},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:e=Object(Lt.a)(Object(Lt.a)({},e),{},{someData:t.payload})}return e},_t=a(47),Mt={currentRoute:"home",unreadNotifications:!1,unreadMessages:!1,notifications:[]},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:e=Object(Lt.a)(Object(Lt.a)({},e),{},{currentRoute:t.payload});break;case N:e=Object(Lt.a)(Object(Lt.a)({},e),{},{notifications:t.payload.notifications.reverse(),unreadNotifications:t.payload.unreadNotifications,unreadMessage:t.payload.unreadMessage});break;case A:e=Object(Lt.a)(Object(Lt.a)({},e),{},{notifications:[t.payload].concat(Object(_t.a)(e.notifications)),unreadNotifications:!0});break;case _:e=Object(Lt.a)(Object(Lt.a)({},e),{},{unreadNotifications:!1});break;case M:e=Object(Lt.a)(Object(Lt.a)({},e),{},{unreadMessages:!1});break;case F:e=Object(Lt.a)(Object(Lt.a)({},e),{},{unreadMessages:!0});break;case"LOGOUT":e=Object(Lt.a)({},Mt)}return e},Gt=a(523),Ht={isAuthenticated:!1,user:{},loading:!1,errors:{}},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return Object(Lt.a)(Object(Lt.a)({},e),{},{isAuthenticated:!Gt(t.payload),user:t.payload});case bt:return Object(Lt.a)(Object(Lt.a)({},e),{},{loading:!0});case vt:return Object(Lt.a)(Object(Lt.a)({},e),{},{errors:t.payload});case yt:return Object(Lt.a)(Object(Lt.a)({},e),{},{errors:{}});case"LOGOUT":return Object(Lt.a)({},Ht);default:return e}},Ut={postComments:[],posts:[],currentfilter:[]},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(Lt.a)(Object(Lt.a)({},e),{},{someData:t.payload});case"GET_POST":e=Object(Lt.a)(Object(Lt.a)({},e),{},{posts:t.payload,postComments:t.allcomments});break;case"ADD_POST":var a=[].concat(Object(_t.a)(e.posts),[t.post]),n=[].concat(Object(_t.a)(e.postComments),[t.comment]);return Object(Lt.a)(Object(Lt.a)({},e),{},{posts:a,postComments:n});case"CHANGE_LIKE":return console.log("Change_like",t.payload),Object(Lt.a)(Object(Lt.a)({},e),{},{posts:e.posts.map((function(e){return e._id==t.payload._id?Object(Lt.a)(Object(Lt.a)({},e),{},{likes:Object(_t.a)(t.payload.likes),noOfLikes:t.payload.noOfLikes}):Object(Lt.a)({},e)}))});case"ADD_COMMENT":return Object(Lt.a)(Object(Lt.a)({},e),{},{postComments:e.postComments.map((function(e){return e.postId==t.id?Object(Lt.a)(Object(Lt.a)({},e),{},{comments:[].concat(Object(_t.a)(e.comments),[t.comment])}):Object(Lt.a)({},e)}))})}return e},Wt={profileDetails:{name:"",avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=50",followers:[],following:[],donations:[],achievements:[]},currentfilter:[]},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:e=Object(Lt.a)(Object(Lt.a)({},e),{},{currentfilter:t.selectedfilters});break;case W:e=Object(Lt.a)(Object(Lt.a)({},e),{},{profileDetails:t.payload});break;case"LOGOUT":e=Object(Lt.a)({},Wt);break;case"ADD_DONATION":e=Object(Lt.a)(Object(Lt.a)({},e),{},{profileDetails:Object(Lt.a)(Object(Lt.a)({},e.profileDetails),{},{donations:[].concat(Object(_t.a)(e.profileDetails.donations),[{_id:t.payload._id,title:t.payload.title}])})}),console.log("inside the left side reducer",e.profileDetails.donations)}return e},Yt=a(7),Bt=a.n(Yt),Kt="CHANGE_FILTERS",Jt={Donations:[],Organisations:[],currentfilter:[]},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DONATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Donations:t.donations});case"GET_ORGANISATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Organisations:t.organisations});case Kt:return Object(Lt.a)(Object(Lt.a)({},e),{},{currentfilter:t.selectedfilters});case"ADD_DONATION":var a=t.payload;return Object(Lt.a)(Object(Lt.a)({},e),{},{Donations:[].concat(Object(_t.a)(e.Donations),[a])});case"PENDING_DONATION":var n=t.payload;return n.status="pending",n.pickupDate=t.date.format("HH:mm ll"),n.receiverId=t.userId,Object(Lt.a)(Object(Lt.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==n._id?Object(Lt.a)({},n):Object(Lt.a)({},e)}))});case"REJECT_DONATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==t.id?Object(Lt.a)(Object(Lt.a)({},e),{},{status:"NotAccepted",receiverId:null}):Object(Lt.a)({},e)}))});case"ACCEPT_DONATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==t.payload._id?Object(Lt.a)(Object(Lt.a)({},e),{},{status:"Accepted"}):Object(Lt.a)({},e)}))})}return e},Zt="GET_SOME_DATA",$t={users:[]},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zt:e=Object(Lt.a)(Object(Lt.a)({},e),{},{someData:t.payload})}return e},ea={suggestedPages:[],profileDetails:{profilePic:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=400",avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=50",name:"",description:"",contact:"",address:"",followers:[],following:[],donations:[],history:[],posts:[],noFed:0,noDonations:0,silverAwards:0,goldAwards:0,diamondAwards:0,leaderboardTop:!1},Pending:[],currentTab:"timelinePost",followers:[],following:[]},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:e=Object(Lt.a)(Object(Lt.a)({},e),{},{someData:t.payload});break;case me:e=Object(Lt.a)(Object(Lt.a)({},e),{},{suggestedPages:t.payload});break;case fe:e=Object(Lt.a)(Object(Lt.a)({},e),{},{currentTab:t.payload});break;case he:e=Object(Lt.a)(Object(Lt.a)({},e),{},{profileDetails:Object(Lt.a)(Object(Lt.a)({},t.payload),{},{followers:Object(_t.a)(t.payload.followers),following:Object(_t.a)(t.payload.following)})});break;case ge:e=Object(Lt.a)(Object(Lt.a)({},e),{},{profileDetails:Object(Lt.a)(Object(Lt.a)({},e.profileDetails),t.payload)});break;case ve:e=Object(Lt.a)(Object(Lt.a)({},e),{},{followers:Object(_t.a)(t.payload)});break;case be:e=Object(Lt.a)(Object(Lt.a)({},e),{},{following:Object(_t.a)(t.payload)});break;case"PENDING_DONATION":var a=t.payload,n=a.donorName,r=a.postTime,o=a.description,i={donorname:n,Description:o,posttime:r,pickupDate:t.date.format("HH:mm ll")};return Object(Lt.a)(Object(Lt.a)({},e),{},{Pending:[].concat(Object(_t.a)(e.Pending),[i])});case"LOGOUT":e=Object(Lt.a)({},ea);break;case"GET_PENDING_DONATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Pending:t.payload});case"REJECT_DONATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Pending:e.Pending.filter((function(e){return e._id!==t.id}))});case"ACCEPT_DONATION":return Object(Lt.a)(Object(Lt.a)({},e),{},{Pending:e.Pending.filter((function(e){return e._id!==t.payload._id}))});case"ADD_HISTORY":case"ADD_FED":case"REVIEW":return Object(Lt.a)(Object(Lt.a)({},e),{},{profileDetails:t.payload})}return e},aa={threads:[]},na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:e=Object(Lt.a)(Object(Lt.a)({},e),{},{threads:Object(_t.a)(t.payload)});break;case jt:var a=e.threads.filter((function(e){return e._id!=t.payload._id}));e=Object(Lt.a)(Object(Lt.a)({},e),{},{threads:[t.payload].concat(Object(_t.a)(a))});break;case"LOGOUT":e=Object(Lt.a)({},aa)}return e},ra="CHANGE_FILTERS",oa={Events:[],currentfilter:[]},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ra:return Object(Lt.a)(Object(Lt.a)({},e),{},{currentfilter:t.selectedfilters});case"ADD_EVENT":return Object(Lt.a)(Object(Lt.a)({},e),{},{Events:[].concat(Object(_t.a)(e.Events),[t.payload])});case"GET_EVENT":return Object(Lt.a)(Object(Lt.a)({},e),{},{Events:t.payload})}return e},la="CHANGE_FILTERS",sa={list:[],currentfilter:[]},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case la:return Object(Lt.a)(Object(Lt.a)({},e),{},{currentfilter:t.selectedfilters});case"GET_LIST":return Object(Lt.a)(Object(Lt.a)({},e),{},{list:t.payload})}return e},ua={key:"root",storage:Pt.a},pa=Object(m.c)({homeReducer:At,navReducer:Ft,authReducer:zt,HomeCenterReducer:qt,DiscoverReducer:Xt,ListReducer:Qt,LeftSidePanelReducer:Vt,profileReducer:ta,messageReducer:na,CommunityReducer:ia,LeaderboardReducer:ca}),da=Object(Rt.a)(ua,pa),ma=Object(m.d)(da,{},Object(m.a)(Tt.a)),fa=Object(Rt.b)(ma),ha=function(){var e;if(console.log("someone wants to start connection",nt),nt)return console.log("socket already there"),nt;var t=null===(e=ma.getState().authReducer.user)||void 0===e?void 0:e.userId;return(nt=kt()("/",{query:"user=".concat(t),reconnection:!0})).on("output_message",(function(e){ma.dispatch(Ct(e)),ma.dispatch((function(e){e({type:F})})),console.log("WOW... I got it",e)})),nt.on("notification",(function(e){ma.dispatch(function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:A,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),console.log(e)})),nt},ga=function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,S.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return n({type:vt,payload:e.response.data})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},va=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("/api/users/login",e).then((function(e){var t=e.data.token;localStorage.setItem("jwtToken",t),ht(t);var n=Object(gt.a)(t);a(ba(n)),a(G("home")),ha()})).catch((function(e){return a({type:vt,payload:e.response.data})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ba=function(e){return{type:Et,payload:e}},Ea=function(){return function(e){console.log("dsa"),localStorage.removeItem("jwtToken"),ht(!1),e(ba({})),e({type:"LOGOUT"})}},ya=function(){return function(e){e({type:yt})}},Oa=a(628),ka=a(137),wa=a(89),ja=a(654),xa=a(181),Ca=a(673),Da=a(674),Sa=a(626),Ta=a(675),Ra=(a(524),a(182));a(270),a(271),a(272),a(273);delete Bt.a.Icon.Default.prototype._getIconUrl,Bt.a.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-shadow.png"});var Ia=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).addMarker=function(t){var a=e.state.markers;a.pop(),a.push(t.latlng),e.props.saveLatLng(a[0]),e.setState({markers:a})},e.state={initialised:!1,markers:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.leafletMap.leafletElement,t=(new xa.Geosearch).addTo(e),a=(new Bt.a.LayerGroup).addTo(e);t.on("results",(function(e){a.clearLayers()}))}},{key:"render",value:function(){var e=this,t=this.props.coords?this.props.coords.longitude:77.209,a=this.props.coords?this.props.coords.latitude:28.6139;!this.state.initialised&&this.props.coords&&(this.setState({initialised:!0}),this.addMarker({latlng:{lat:a,lng:t}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MAP"},r.a.createElement(Ca.a,{style:{height:"80vh"},center:[a,t],zoom:"10",ref:function(t){e.leafletMap=t},onClick:this.addMarker},r.a.createElement(Da.a,{attribution:"\xa9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement("div",{className:"pointer"}),this.state.markers.map((function(e,t){return r.a.createElement(Sa.a,{draggable:!0,key:"marker-".concat(t),position:e},r.a.createElement(Ta.a,null,r.a.createElement("span",null,"Marked Location")))})))))}}]),a}(n.Component),Pa=Object(Ra.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:1e3})(Ia),La=function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.a.post("/api/donation/create",{donation:e});case 2:r=a.sent,n({type:"ADD_DONATION",payload:Object(Lt.a)(Object(Lt.a)({},r.data.donation),{},{contact:t})});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Na={labelCol:{span:6},wrapperCol:{span:14}},Aa={rules:[{type:"object",required:!0,message:"Please select time!"}]},_a=function(e){return Array.isArray(e)?e:e&&e.fileList},Ma=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={user:"Name"},e.saveLatLng=function(t){e.setState({latlng:t})},e.onChange=function(t,a){e.setState({Date:a})},e.disabledDate=function(e){return e&&e<ie()().endOf("day")},e.state={title:"",description:"",Date:"",files:[],mapOpen:!1,latlng:null},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.latlng;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{destroyOnClose:!0,visible:this.props.visible,title:"Donation Details",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:this.props.loading,form:"donateform",htmlType:"submit"},"Submit")]},r.a.createElement(le.a,Object.assign({id:"donateform",name:"validate_other",onFieldsChange:function(t,a){e.setState({title:a[0].value,description:a[1].value})},onFinish:function(t){if(void 0!==e.state.latlng){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location}));console.log("this is to create the post",n);var r={donorId:e.props.profileDetails._id,title:e.state.title,expiryTime:e.state.Date,peopleFed:0,status:"NotAccepted",description:e.state.description,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]},images:e.state.files,donorName:e.props.profileDetails.name};e.props.addDonation(r,e.props.profileDetails.contact),e.props.addHistory({color:"blue",icon:"clock",text:r.title+" ( Donation expires on "+r.expiryTime+" )"}),e.setState({latlng:null,files:[]})}}},Na),r.a.createElement(le.a.Item,Object.assign({},Na,{name:"username",label:"Title",rules:[{required:!0,message:"Please input your Title"}]}),r.a.createElement(se.a,{placeholder:"Please input your Title"})),r.a.createElement(le.a.Item,{name:["user","ItemDetails"],label:"ItemDetails",rules:[{required:!0,message:"Please Enter Items details"}]},r.a.createElement(se.a.TextArea,{placeholder:"Please Enter Items details here"})),r.a.createElement(le.a.Item,Object.assign({name:"date-picker",label:"Enter expiry date"},Aa),r.a.createElement(Oa.a,{onChange:this.onChange,disabledDate:this.disabledDate,format:"HH:mm ll"})),r.a.createElement(le.a.Item,{label:"Address",rules:[{required:!0,message:"Please input your address"}]},r.a.createElement(ka.a,{gutter:8},r.a.createElement(wa.a,{span:20},r.a.createElement(se.a,{placeholder:"Location",disabled:!0,value:t?t.lat+" , "+t.lng:""})),r.a.createElement(wa.a,{span:2},r.a.createElement(k.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(ja.a,null)})))),r.a.createElement(le.a.Item,{label:"Dragger"},r.a.createElement(le.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:_a,noStyle:!0},r.a.createElement(ce.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var t=Object(x.a)(j.a.mark((function t(a){var n,r,o,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,S.a.post("/upload/donations",i).then((function(t){var a;r(t.data),a=t.data,e.setState({files:[].concat(Object(_t.a)(e.state.files),[a.location])})})).catch((function(e){console.log("error in uploading"),o("Error in uploading.Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ue.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))),r.a.createElement(g.a,{footer:[r.a.createElement(k.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(Pa,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),Fa=Object(d.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{addHistory:Object(m.b)(Oe,e),addDonation:Object(m.b)(La,e)}}))(Ma),Ga=h.a.Header,Ha=(se.a.Search,function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),500),g.a.success({content:"Donations posted"})},e.handleCancel=function(){e.setState({visible:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.loading,n=this.props,o=n.currentRoute,i=n.setCurrentRoute,l=n.logoutUser,s=n.auth,c=n.notifications,u=n.unreadNotifications,p=n.unreadMessages,d=(null===c||void 0===c?void 0:c.length)?c.map((function(e){var t=e.user,a=e.notificationType,n=e.createdAt;return r.a.createElement(b.a,{style:{width:320,margin:"10px 5px"}},r.a.createElement("p",null,r.a.createElement(R.b,{to:"/profile/".concat(t._id)},r.a.createElement(E.a,{src:t.avatar})," ",t.name),"follow"==a?" followed you!":"donation-accept"==a?" has accepted your donation":"donation"==a?" posted a donation":"like"==a?" liked your post":"comment"==a?" commented on your post":"donation-interest"==a?" is interested in your donation":"donation-reject"==a?" rejected your donation":"gold"==a?" gave you a Gold award":"silver"==a?" gave you a Silver award":"diamond"==a?" gave you a Diamond award":" "),r.a.createElement("span",{style:{marginLeft:"5px"}},ie()(n).fromNow()))})):r.a.createElement("div",null,"Notifications are Empty");return s.isAuthenticated?r.a.createElement("div",null,r.a.createElement(Ga,{style:{position:"fixed",zIndex:100,width:"100%"}},r.a.createElement(I.a,{theme:"dark",mode:"horizontal",selectedKeys:[o,"logo"],onSelect:function(e){"logout"==e.key?l():i(e.key)}},r.a.createElement(I.a.Item,{key:"logo",className:"customclasslogo",icon:r.a.createElement(st.a,null)},r.a.createElement(R.b,{to:"/home"},"NofoodWasted")),r.a.createElement(k.a,{type:"dashed",size:"large",style:{marginRight:"36px",marginLeft:"36px"},onClick:this.showModal},"Donate Now!"),r.a.createElement(Fa,{handleCancel:this.handleCancel,handleOk:this.handleOk,showModal:this.showModal,visible:t,loading:a}),r.a.createElement(I.a.Item,{key:"home",icon:r.a.createElement(ct.a,null)},r.a.createElement(R.b,{to:"/home"},"Home")),r.a.createElement(I.a.Item,{key:"discover",icon:r.a.createElement(f.a,null)},r.a.createElement(R.b,{to:"/discover"},"Discover")),r.a.createElement(I.a.Item,{key:"community",icon:r.a.createElement(ut.a,null)},r.a.createElement(R.b,{to:"/community"},"Community")),r.a.createElement(I.a.Item,{key:"leaderboard",icon:r.a.createElement(pt.a,null)},r.a.createElement(R.b,{to:"/leaderboard"},"Leaderboard")),r.a.createElement(I.a.Item,{key:"notifications"},r.a.createElement(it.a,{placement:"bottom",content:d,title:"Notifications",trigger:"click"},r.a.createElement(lt.a,{dot:!!u}),r.a.createElement(dt.a,null),"Notifications")),r.a.createElement(I.a.Item,{key:"messages"},r.a.createElement(R.b,{to:"/messages"},r.a.createElement(lt.a,{dot:!!p}),r.a.createElement(mt.a,null),"Messages")),r.a.createElement(I.a.Item,{key:"profile",icon:r.a.createElement(P.a,null)},r.a.createElement(R.b,{to:"/i/profile/".concat(s.user.userId)},"Profile")),r.a.createElement(I.a.Item,{key:"logout",icon:r.a.createElement(ft.a,null)},"Logout")))):null}}]),a}(n.Component)),za=Object(l.g)(Object(d.b)((function(e){return{currentRoute:e.navReducer.currentRoute,auth:e.authReducer,notifications:e.navReducer.notifications,unreadNotifications:e.navReducer.unreadNotifications,unreadMessages:e.navReducer.unreadMessages}}),(function(e){return{setCurrentRoute:Object(m.b)(G,e),logoutUser:Object(m.b)(Ea,e)}}))(Ha)),Ua=a(664),qa=a(665),Wa=a(666),Va=a(667),Ya=a(662),Ba=a(668),Ka=a(669),Ja=a(228),Xa=a(643),Za=a(639),$a=a(640),Qa=(a(531),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.title,o=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{title:n,visible:this.props.visible,onCancel:this.props.handleCancel,destroyOnClose:!0,footer:[r.a.createElement(k.a,{type:"primary",onClick:this.props.handleCancel},"Close")]},r.a.createElement(v.b,{itemLayout:"horizontal",dataSource:a,loading:o,renderItem:function(t){return r.a.createElement(R.b,{onClick:e.props.handleCancel,to:"/profile/".concat(t._id)},r.a.createElement(v.b.Item,null,r.a.createElement(v.b.Item.Meta,{avatar:r.a.createElement(E.a,{src:t.avatar}),title:r.a.createElement("a",null,t.name),description:t.description})))}}),","))}}]),a}(r.a.Component)),en=a(75),tn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this.props.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{visible:this.props.visible,title:"Edit Profile",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(k.a,{form:"edit-profile-form",key:"submit",type:"primary",htmlType:"submit",loading:this.props.loading},"Submit")]},r.a.createElement(le.a,{id:"edit-profile-form",layout:"vertical",name:"form_in_modal",initialValues:(e={},Object(en.a)(e,"name",t.name),Object(en.a)(e,"contact",t.contact),Object(en.a)(e,"address",t.address),Object(en.a)(e,"description",t.description),e),onFinish:this.props.handleOk},r.a.createElement(le.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(se.a,{prefix:r.a.createElement(P.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Contact",name:"contact",rules:[{required:!0,message:"Please input your contact!"}]},r.a.createElement(se.a,{prefix:r.a.createElement(Ya.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},r.a.createElement(se.a.TextArea,null)),r.a.createElement(le.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input a brief description!"}]},r.a.createElement(se.a.TextArea,null)))))}}]),a}(r.a.Component),an=Object(d.b)((function(e){return{data:e.profileReducer.profileDetails}}))(tn),nn=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("/api/event/create",{event:e});case 2:n=t.sent,console.log(n.data),a({type:"ADD_EVENT",payload:n.data.event});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},rn={labelCol:{span:6},wrapperCol:{span:14}},on={rules:[{type:"object",required:!0,message:"Please select time!"}]},ln=function(e){return Array.isArray(e)?e:e&&e.fileList},sn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).saveLatLng=function(t){e.setState({latlng:t})},e.onChange=function(t,a){e.setState({Date:a})},e.disabledDate=function(e){return e&&e<ie()().endOf("day")},e.state={title:"",description:"",Date:"",files:[],mapOpen:!1,latlng:null},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.latlng;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{destroyOnClose:!0,visible:this.props.visible,title:"Event Details",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:this.props.loading,form:"donateform",htmlType:"submit"},"Submit")]},r.a.createElement(le.a,Object.assign({id:"donateform",name:"validate_other",onFieldsChange:function(t,a){e.setState({title:a[0].value,description:a[1].value})},onFinish:function(t){if(void 0!==e.state.latlng){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location}));console.log("this is to create the post",n);var r={donorId:e.props.profileDetails._id,title:e.state.title,expiryTime:e.state.Date,description:e.state.description,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]},images:e.state.files};e.props.addEvent(r),e.props.addHistory({color:"blue",icon:"dot",text:r.title+" ( Event Created on "+ie()().format("HH:mm ll")+" )"}),e.setState({latlng:null,files:[]})}}},rn),r.a.createElement(le.a.Item,Object.assign({name:"username",label:"Title"},rn,{rules:[{required:!0,message:"Please input your Title"}]}),r.a.createElement(se.a,{placeholder:"Please input your Title"})),r.a.createElement(le.a.Item,{name:["user","ItemDetails"],label:"Event Details",rules:[{required:!0,message:"Please Enter Event details"}]},r.a.createElement(se.a.TextArea,{placeholder:"Please Enter Event details here"})),r.a.createElement(le.a.Item,Object.assign({name:"date-picker",label:"Enter Event date"},on),r.a.createElement(Oa.a,{showTime:!0,onChange:this.onChange,disabledDate:this.disabledDate,format:"HH:mm ll"})),r.a.createElement(le.a.Item,{label:"Address",rules:[{required:!0,message:"Please input your address"}]},r.a.createElement(ka.a,{gutter:8},r.a.createElement(wa.a,{span:20},r.a.createElement(se.a,{placeholder:"Location",disabled:!0,value:t?t.lat+" , "+t.lng:""})),r.a.createElement(wa.a,{span:2},r.a.createElement(k.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(ja.a,null)})))),r.a.createElement(le.a.Item,{label:"Dragger"},r.a.createElement(le.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:ln,noStyle:!0},r.a.createElement(ce.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var t=Object(x.a)(j.a.mark((function t(a){var n,r,o,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,S.a.post("/upload/donations",i).then((function(t){var a;r(t.data),a=t.data,e.setState({files:[].concat(Object(_t.a)(e.state.files),[a.location])})})).catch((function(e){console.log("error in uploading"),o("Error in uploading.Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ue.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))),r.a.createElement(g.a,{footer:[r.a.createElement(k.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(Pa,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),cn=Object(d.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{addEvent:Object(m.b)(nn,e),addHistory:Object(m.b)(Oe,e)}}))(sn),un=a(663),pn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{visible:this.props.visible,title:"Change Profile Picture",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.props.handleCancel},"Return")]},r.a.createElement(ce.a,{multiple:!1,name:"file",accept:"image/*",customRequest:function(){var t=Object(x.a)(j.a.mark((function t(a){var n,r,o,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,S.a.post("/upload/profile-pic",i).then((function(t){r(t.data),e.props.uploadProfilePic(t.data.profilePic,t.data.avatar)})).catch((function(e){console.log("error in uploading"),o("Error in uploading. Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),listType:"picture"},r.a.createElement(k.a,{icon:r.a.createElement(un.a,null)},"Upload Profile Pic"))))}}]),a}(r.a.Component),dn=Object(d.b)(null,(function(e){return{uploadProfilePic:Object(m.b)(De,e)}}))(pn),mn=Ja.a.TabPane,fn=h.a.Content,hn=h.a.Sider,gn={labelCol:{span:8},wrapperCol:{span:16}},vn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={followersVisible:!1,followingVisible:!1,loadingAccept:!1,visibleAccept:!1,loadingDonation:!1,visibleDonation:!1,loadingEvent:!1,visibleEvent:!1,visibleEdit:!1,visibleProfilePic:!1,loadingEdit:!1,clicked:!1,followLoading:!1,unfollowLoading:!1,followListLoading:!1,profilePageLoading:!1,followingText:"Following"},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(t){console.log(t),e.setState({visible:!1})},e.handleCancel=function(t){console.log(t),e.setState({visible:!1})},e.showModalEvent=function(){e.setState({visibleEvent:!0})},e.handleOkEvent=function(){e.setState({loadingEvent:!0}),setTimeout((function(){e.setState({loadingEvent:!1,visibleEvent:!1})}),500),g.a.success({content:"Event posted"})},e.handleCancelEvent=function(t){console.log(t),e.setState({visibleEvent:!1})},e.showModalAccept=function(t){e.props.acceptdonation(t),e.props.addHistory({color:"green",icon:"dot",text:t.title+" ( Donation accepted on "+ie()().format("HH:mm ll")+" )"}),e.setState({visibleAccept:!0,acceptdonation:t})},e.handleOkAccept=function(){e.setState({loadingAccept:!0}),setTimeout((function(){e.setState({loadingAccept:!1,visibleAccept:!1})}),1e3),g.a.success({content:"Donation Shared on profile"})},e.handleCancelAccept=function(){e.setState({visibleAccept:!1})},e.showModalDonation=function(t){e.setState({currentDonationId:t,visibleDonation:!0})},e.handleOkDonation=function(){e.setState({loadingDonation:!0}),setTimeout((function(){e.setState({loadingDonation:!1,visibleDonation:!1})}),1e3),g.a.success({content:"Thank You"})},e.handleCancelDonation=function(){e.setState({visibleDonation:!1})},e.handleCancelProfilePic=function(){e.setState({visibleProfilePic:!1})},e.showModalEdit=function(){e.setState({visibleEdit:!0})},e.handleOkEdit=function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingEdit:!0}),t.next=3,e.props.editProfile(a);case 3:e.setState({loadingEdit:!1,visibleEdit:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCancelEdit=function(){e.setState({visibleEdit:!1})},e.handleClickDiamond=function(){Xa.b.info("Diamond award: each one feeds upto 3 people")},e.handleClickGold=function(){Xa.b.info("Gold award : each one feeds upto 2 people")},e.handleClickleaderboardTop=function(){Xa.b.info("nofoodWasted leaderboard :  Top contributor!")},e.handleClickverifiedAccount=function(){Xa.b.info("This is a verified organisation registered with the authorities!")},e.handleClickSilver=function(){Xa.b.info("Silver award : each feeds 1 person")},e.callback=function(e){console.log(e)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getProfile(this.props.match.params.id);case 3:return e.next=5,this.props.getPendingDonations();case 5:this.setState({profilePageLoading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this,n=this.state,o=n.followersVisible,i=n.followingVisible,l=n.loadingDonation,s=n.visibleDonation,c=n.loadingAccept,u=n.visibleAccept,p=n.loadingEvent,d=n.visibleEvent,m=n.visibleEdit,f=n.loadingEdit,w=n.visibleProfilePic,C=this.props,D=C.PendingDonations,S=C.profileDetails,T=C.user,I=C.followUser,P=C.unfollowUser,L=C.getFollowers,N=C.getFollowing,A=function(){var e,t,n;return r.a.createElement(Ja.a,{centered:"true",size:"large"},r.a.createElement(mn,{tab:"Timeline",key:"timelinePost"},r.a.createElement(Za.a,{mode:"alternate"},null===S||void 0===S||null===(e=S.history)||void 0===e?void 0:e.map((function(e){return r.a.createElement(Za.a.Item,{color:null===e||void 0===e?void 0:e.color,dot:"clock"===(null===e||void 0===e?void 0:e.icon)?r.a.createElement(Ua.a,null):null},e.text)})))),r.a.createElement(mn,{tab:"Donations",key:"donations"},null===S||void 0===S||null===(t=S.donations)||void 0===t?void 0:t.map((function(e){return r.a.createElement(b.a,{actions:(n=e,(null===n||void 0===n?void 0:n.reviewed)||"Accepted"!==n.status?[]:[r.a.createElement("p",{className:"text",onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,a.setState({currentDonation:n});case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("b",{onClick:function(){return a.showModalDonation(n._id)}}," Rate the Reciever "))]),title:e.title,extra:r.a.createElement("div",null,e.status),style:{marginLeft:"75px",marginRight:"75px",marginTop:"8px"}},r.a.createElement("p",null,e.description),r.a.createElement(y.b,null,(null===(t=e.images)||void 0===t?void 0:t.length)?t.map((function(e){return r.a.createElement(Z.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var t,n}))),r.a.createElement(mn,{tab:"Posts",key:"posts"},null===S||void 0===S||null===(n=S.posts)||void 0===n?void 0:n.map((function(e){return r.a.createElement(b.a,{title:e.author,extra:e.DateTime,style:{marginLeft:"75px",marginRight:"75px",marginTop:"8px"}},r.a.createElement("p",null,e.description))}))))},_=D.length?D.map((function(e){return r.a.createElement(b.a,{title:e.donorName,extra:ie()(e.postTime).format("ll"),size:"small",style:{width:250},actions:[r.a.createElement("p",{classname:"cardtext1",onClick:function(){return a.showModalAccept(e)}},r.a.createElement(qa.a,{hoverable:!0,key:"Accept"})," Accept "),r.a.createElement("p",{onClick:function(){return a.props.rejectDonation(e._id)}},r.a.createElement(Wa.a,{hoverable:!0,key:"Reject"})," Reject ")]},r.a.createElement("p",null,r.a.createElement("p",null,r.a.createElement("b",null,"Time Given: "),e.pickupDate),e.description))})):r.a.createElement("div",null,"No Donations are currently there!"),M=function(){var e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.addFed(t.peoplefed,t.rating,null===(n=a.state.acceptdonation)||void 0===n?void 0:n.donorId);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return this.state.profilePageLoading?r.a.createElement(Ke,null):r.a.createElement(h.a,{key:this.props.match.params.id,className:"layout",style:{marginTop:"56px"}},r.a.createElement(h.a,null,r.a.createElement(hn,{width:250,style:{padding:"20px"}},r.a.createElement(v.b,{itemLayout:"horizontal",header:r.a.createElement("div",{style:{fontWeight:"bolder",padding:"5px",fontSize:"medium"}},"Suggested pages"),renderItem:function(e){return r.a.createElement(v.b.Item,null,r.a.createElement(v.b.Item.Meta,{avatar:r.a.createElement(E.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.a.createElement("a",{href:"https://www.google.com/"},e.title),description:"brief description"}))}})),r.a.createElement(h.a,null,r.a.createElement(fn,{style:{padding:24,marginTop:24,minHeight:280},key:this.props.match.params.id},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Z.a,{width:240,src:null===S||void 0===S?void 0:S.profilePic}),r.a.createElement(k.a,{shape:"circle",style:{marginLeft:"-15px",zIndex:"10"},onClick:function(){return a.setState({visibleProfilePic:!0})}},r.a.createElement(ae.a,null)),r.a.createElement("div",{style:{marginLeft:"8px",display:"flex",flexDirection:"column",justifyContent:"space-evenly"}},r.a.createElement("p",{style:{fontSize:"24px",marginBottom:"0px",fontWeight:500}},S.name,"organisation"===S.userType?r.a.createElement("span",{style:{position:"relative",top:"-8px",left:"-4px"}},r.a.createElement(k.a,{shape:"circle",size:"small",ghost:"true",type:"link",onClick:this.handleClickverifiedAccount},r.a.createElement(Va.a,null))):null),r.a.createElement("div",{style:{}},r.a.createElement("p",null,null===S||void 0===S?void 0:S.description," "),r.a.createElement(Ya.a,null)," ",r.a.createElement("span",{style:{fontWeight:500,marginRight:"20px"}},null===S||void 0===S?void 0:S.contact),r.a.createElement(ct.a,null)," ",r.a.createElement("span",{style:{fontWeight:500}},null===S||void 0===S?void 0:S.address),r.a.createElement("span",{style:{float:"right",marginLeft:"40px"}},(null===S||void 0===S?void 0:S.leaderboardTop)?r.a.createElement("span",{onClick:this.handleClickleaderboardTop,style:{marginRight:"6px"}},r.a.createElement(E.a,{size:"small",src:"/images/awards/leaderboardTop.jpg"})):null,r.a.createElement("span",{onClick:this.handleClickDiamond,style:{marginRight:"6px"}},r.a.createElement(lt.a,{showZero:!0,size:"small",count:null===S||void 0===S?void 0:S.diamondAwards,style:{backgroundColor:"#97033e"}},r.a.createElement(E.a,{size:"small",src:"/images/awards/diamond.jpg"}))),r.a.createElement("span",{onClick:this.handleClickGold,style:{marginRight:"6px"}},r.a.createElement(lt.a,{showZero:!0,size:"small",count:null===S||void 0===S?void 0:S.goldAwards,style:{backgroundColor:"#97033e"}},r.a.createElement(E.a,{size:"small",src:"/images/awards/gold.jpg"}))),r.a.createElement("span",{onClick:this.handleClickSilver,style:{}},r.a.createElement(lt.a,{showZero:!0,size:"small",count:null===S||void 0===S?void 0:S.silverAwards,style:{backgroundColor:"#97033e"}},r.a.createElement(E.a,{size:"small",src:"/images/awards/silver.jpg"}))))),r.a.createElement("div",{style:{marginLeft:"-16px",marginTop:"6px"}},r.a.createElement(k.a,{type:"link",size:"large",style:{fontWeight:"bolder"},onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followersVisible:!0,followListLoading:!0}),e.next=3,L(a.props.match.params.id);case 3:a.setState({followListLoading:!1});case 4:case"end":return e.stop()}}),e)})))},null===S||void 0===S||null===(e=S.followers)||void 0===e?void 0:e.length," Followers"),r.a.createElement(k.a,{type:"link",size:"large",style:{fontWeight:"bolder"},onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followingVisible:!0,followListLoading:!0}),e.next=3,N(a.props.match.params.id);case 3:a.setState({followListLoading:!1});case 4:case"end":return e.stop()}}),e)})))},null===S||void 0===S||null===(t=S.following)||void 0===t?void 0:t.length," Following"),r.a.createElement(Qa,{title:"Followers",data:this.props.followers,handleCancel:function(){return a.setState({followersVisible:!1})},showModal:function(){return a.setState({followersVisible:!0})},visible:o,loading:this.state.followListLoading}),r.a.createElement(Qa,{title:"Following",data:this.props.following,handleCancel:function(){return a.setState({followingVisible:!1})},showModal:function(){return a.setState({followingVisible:!0})},visible:i,loading:this.state.followListLoading}),T.userId===this.props.match.params.id?r.a.createElement("span",{style:{float:"right",marginTop:"6px"}},r.a.createElement(k.a,{onClick:this.showModalEdit,type:"primary",style:{marginRight:"8px"}},r.a.createElement(ae.a,null)," Edit Profile"),r.a.createElement(an,{handleCancel:this.handleCancelEdit,handleOk:this.handleOkEdit,showModal:this.showModalEdit,visible:m,loading:f}),r.a.createElement(dn,{visible:w,handleCancel:this.handleCancelProfilePic}),r.a.createElement(k.a,{onClick:this.showModalEvent,type:"primary",style:{marginRight:"8px"}},"Add Event"),r.a.createElement(cn,{handleCancel:this.handleCancelEvent,handleOk:this.handleOkEvent,showModal:this.showModalEvent,visible:d,loading:p})):r.a.createElement("span",{style:{float:"right",marginTop:"6px"}},r.a.createElement(r.a.Fragment,null,(null===S||void 0===S?void 0:S.followers.find((function(e){return e==T.userId})))?r.a.createElement(k.a,{onMouseOver:function(){a.setState({followingText:"Unfollow"})},onMouseLeave:function(){a.setState({followingText:"Following"})},loading:this.state.unfollowLoading,type:"Unfollow"==this.state.followingText?"danger":"primary",style:{marginRight:"14px"},onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({unfollowLoading:!0}),e.next=3,P(a.props.match.params.id);case 3:a.setState({unfollowLoading:!1});case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("p",null," ",r.a.createElement(Ba.a,null)," ",this.state.followingText)):r.a.createElement(k.a,{loading:this.state.followLoading,type:"primary",style:{marginRight:"14px"},onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followLoading:!0}),e.next=3,I(a.props.match.params.id);case 3:a.setState({followLoading:!1});case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("p",null," ",r.a.createElement(Ba.a,null)," Follow ")),r.a.createElement(R.b,{onClick:function(){return a.props.setCurrentRoute("messages")},to:{pathname:"/messages",state:{user:this.props.match.params.id}}},r.a.createElement(k.a,{type:"primary",style:{marginRight:"14px"}},r.a.createElement(Ka.a,null)," Message"))))),r.a.createElement("div",{style:{marginTop:"8px"}},r.a.createElement("p",{style:{fontWeight:600}},r.a.createElement("span",null,null===S||void 0===S?void 0:S.name," has fed ",null===S||void 0===S?void 0:S.noFed," people and made ",null===S||void 0===S?void 0:S.noDonations," donations overall!"))))),r.a.createElement(O.a,{style:{background:"rgba(151,3,62, 0.2)"}}),r.a.createElement(A,null)),T.userId===this.props.match.params.id?r.a.createElement(hn,{width:300,style:{padding:"20px"}},r.a.createElement("div",{style:{fontWeight:"bolder",paddingBottom:"15px",paddingTop:"15px",fontSize:"medium"}},"Pending Donations"),r.a.createElement("div",null,_)):null)),r.a.createElement(g.a,{destroyOnClose:!0,visible:u,title:"Accept Donation",onOk:this.handleOkAccept,onCancel:this.handleCancelAccept,footer:[r.a.createElement(k.a,{key:"back",onClick:this.handleCancelAccept},"cancel"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:c,onClick:this.handleOkAccept,form:"acceptform",htmlType:"submit"},"Submit")]},r.a.createElement(le.a,Object.assign({id:"acceptform"},gn,{name:"basic",onFinish:M,onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(le.a.Item,{label:"No of people fed ?",name:"peoplefed",rules:[{required:!0,message:"Please input peoplefed"}]},r.a.createElement($a.a,{min:"1",placeholder:"No. Fed"})),r.a.createElement(le.a.Item,{label:"Rate the User",name:"rating",rules:[{required:!0,message:"Please rate the user"}]},r.a.createElement($a.a,{min:"1",max:"5",placeholder:"1 to 5"})))),r.a.createElement(g.a,{destroyOnClose:!0,visible:s,title:"Rate the Organisation",onOk:this.handleOkDonation,onCancel:this.handleCancelDonation,footer:[r.a.createElement(k.a,{key:"back",onClick:this.handleCancelDonation},"Cancel"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:l,onClick:this.handleOkDonation,form:"rateform",htmlType:"submit"},"Submit")]},r.a.createElement(le.a,Object.assign({id:"rateform"},gn,{name:"basic",onFinish:function(e){a.props.reviewOrg(a.state.currentDonationId,e.rating),console.log("Success:",e),console.log(a.state.currentDonationId)},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(le.a.Item,{label:"Rate the Organisation",name:"rating",rules:[{required:!0,message:"Please rate the user"}]},r.a.createElement($a.a,{min:"1",max:"5",placeholder:"1 to 5"})))))}}]),a}(n.Component),bn=Object(d.b)((function(e){return console.log(e.profileReducer.profileDetails),{suggestedPages:e.profileReducer.suggestedPages,currentTab:e.profileReducer.currentTab,donations:e.profileReducer.donations,timelinePost:e.profileReducer.profileDetails.history,posts:e.profileReducer.posts,PendingDonations:e.profileReducer.Pending,profileDetails:e.profileReducer.profileDetails,user:e.authReducer.user,followers:e.profileReducer.followers,following:e.profileReducer.following}}),(function(e){return{reviewOrg:Object(m.b)(je,e),addFed:Object(m.b)(we,e),addHistory:Object(m.b)(Oe,e),acceptdonation:Object(m.b)(Ee,e),getSomeData:Object(m.b)(ye,e),changeTab:Object(m.b)(Ce,e),getProfile:Object(m.b)(ke,e),followUser:Object(m.b)(Se,e),unfollowUser:Object(m.b)(Te,e),getFollowers:Object(m.b)(Re,e),getFollowing:Object(m.b)(Ie,e),setCurrentRoute:Object(m.b)(G,e),rejectDonation:Object(m.b)(Pe,e),getPendingDonations:Object(m.b)(xe,e),editProfile:Object(m.b)(Le,e)}}))(vn),En=a(136),yn=a.n(En);a(574),a(575);delete Bt.a.Icon.Default.prototype._getIconUrl,Bt.a.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-shadow.png"});var On=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).addMarker=function(t){var a=e.state.markers;a.pop(),a.push(t.latlng),e.setState({markers:a})},e.state={initialised:!1,markers:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.leafletMap.leafletElement,t=(new xa.Geosearch).addTo(e),a=(new Bt.a.LayerGroup).addTo(e);t.on("results",(function(e){a.clearLayers()}))}},{key:"render",value:function(){var e=this,t=this.props.coords?this.props.coords.longitude:77.4126,a=this.props.coords?this.props.coords.latitude:23.2599;console.log(this.props);var n=this.props,o=n.longitudeP,i=n.latitudeP,l=n.message;!this.state.initialised&&this.props.coords&&(this.setState({initialised:!0}),this.addMarker({latlng:{lat:a,lng:t}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MAP"},r.a.createElement(Ca.a,{style:{height:"80vh"},center:[a,t],zoom:"5",ref:function(t){e.leafletMap=t},onClick:this.addMarker},r.a.createElement(Da.a,{attribution:"\xa9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement("div",{className:"pointer"}),this.props.coords?r.a.createElement(Sa.a,{position:[a,t]},r.a.createElement(Ta.a,null,"you are here!")):r.a.createElement("div",{className:"loading"},"Loading"),r.a.createElement(Sa.a,{position:[i,o]},r.a.createElement(Ta.a,null,l)))))}}]),a}(n.Component),kn=Object(Ra.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:1e3})(On),wn=a(150),jn=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:Kt,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xn=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("api/users/organisations");case 2:a=e.sent,t({type:"GET_ORGANISATION",organisations:a.data.organisations});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Cn=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/donation/donations");case 2:a=e.sent,t({type:"GET_DONATION",donations:a.data.donations});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Dn=function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n,r){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r().authReducer.user.userId,a.next=3,S.a.post("/api/donation/changeStatus",{_id:e._id,status:"pending",date:t.format("HH:mm ll")});case 3:n({type:"PENDING_DONATION",payload:e,date:t,userId:o});case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},Sn=h.a.Content,Tn=h.a.Sider,Rn=I.a.SubMenu;var In={labelCol:{span:8},wrapperCol:{span:16}},Pn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={Organisations:[],selectedMenuItem:"1",loading:!1,visible:!1,filters:[],mapOpen:!1,lngp:77.209,latp:28.6139,pickupDate:null},e.showModal=function(t){e.props.acceptdonation(t),e.props.addHistory({color:"green",icon:"dot",text:t.title+" ( Donation accepted on "+ie()().format("HH:mm ll")+" )"}),e.setState({visible:!0,acceptdonation:t})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),1e3),g.a.success({content:"Donation Shared on profile"})},e.handleCancel=function(){e.setState({visible:!1})},e.disabledDate=function(e){return e&&e<ie()().endOf("day")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getOrganisation();case 3:this.props.getDonation(),this.setState({profilePageLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this,n=this.state,o=n.selectedMenuItem,i=n.visible,l=n.loading,s=(n.latp,n.lngp,this.props),c=s.Organisations,u=s.Donations,p=s.pendingDonations,d=s.pendingDonorDonation,m=function(e){return 0===a.props.userType.localeCompare("donor")||a.props.userId==e.donorId?[]:[r.a.createElement(R.b,{to:{pathname:"/messages",state:{user:e.donorId}}},r.a.createElement("p",{className:"text",onClick:function(){a.props.setCurrentRoute("messages")}},r.a.createElement("b",null," Contact Donor "))),r.a.createElement("p",{className:"text",onClick:Object(x.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,a.setState({currentDonation:e});case 3:a.setState({mapOpen:!0});case 4:case"end":return t.stop()}}),t)})))},r.a.createElement("b",null," Interested "))]},f=function(e){var t=a.state.filters;if(t.find((function(e){return 0===e.localeCompare("Time")}))){var n=yn()(e,(function(e){return new ie.a(e.createdAt)}));return console.log(n),n}if(t.find((function(e){return 0===e.localeCompare("Expiry Date")}))){var r=yn()(e,(function(e){return new ie.a(e.expiryTime)}));return console.log(r),r}return e}(u),v=u.length?f.map((function(e){return r.a.createElement(b.a,{title:r.a.createElement(R.b,{onClick:function(){return a.props.setCurrentRoute("profile")},to:"/profile/".concat(e.donorId)},e.donorName),extra:r.a.createElement("div",null,ie()(e.createdAt).format("HH:mm ll")),style:{width:700,margin:"8px"},actions:m(e)},r.a.createElement("p",null,e.description),r.a.createElement(y.b,null,(t=e.images).length?t.map((function(e){return r.a.createElement(Z.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var t})):r.a.createElement("div",null,"No Donations are currently there!");console.log("this is inside the donations",u);var O=p.length?p.map((function(e){return r.a.createElement(b.a,{title:e.donorName,extra:ie()(e.createdAt).format("ll"),size:"small",style:{width:250},actions:[r.a.createElement("p",{classname:"cardtext1",onClick:function(){return a.showModal(e)}},r.a.createElement(qa.a,{hoverable:!0,key:"Accept"})," Accept "),r.a.createElement("p",{onClick:function(){return a.props.rejectDonation(e._id)}},r.a.createElement(Wa.a,{hoverable:!0,key:"Reject"})," Reject ")]},r.a.createElement("p",null,r.a.createElement("p",null,r.a.createElement("b",null,"Time Given: "),e.pickupDate),e.description))})):r.a.createElement("div",null,"No Pending donations are currently there!"),w=d.length?d.map((function(e){return r.a.createElement(b.a,{title:e.donorName,extra:ie()(e.postTime).format("HH:mm ll"),size:"small",style:{width:250}},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Donations are currently there!"),C=c.length?c.map((function(e){return r.a.createElement(R.b,{onClick:function(){return a.props.setCurrentRoute("profile")},to:"/profile/".concat(e._id)},r.a.createElement(b.a,{title:r.a.createElement("div",null," ",r.a.createElement(E.a,{src:e.avatar,alt:"Han Solo"})," ",r.a.createElement("a",null,e.name)," "),extra:r.a.createElement("p",null,"People fed ",null===e||void 0===e?void 0:e.noFed," "),style:{width:700,margin:"8px"}},r.a.createElement("p",null,r.a.createElement(Ya.a,null)," : ",e.contact," ",r.a.createElement(ct.a,null)," : ",e.address," "),r.a.createElement("p",null,e.description)))})):r.a.createElement("div",null,"No Organisation are currently there!"),D=function(e){a.setState({selectedMenuItem:e})},S=function(){var e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.addFed(t.peoplefed,t.rating,null===(n=a.state.acceptdonation)||void 0===n?void 0:n.donorId);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return this.state.profilePageLoading?r.a.createElement(Ke,null):r.a.createElement(h.a,null,r.a.createElement(Tn,{width:280,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"64px"}},r.a.createElement(I.a,Object(en.a)({mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["1"],style:{height:"100%",borderRight:0},onClick:function(e){return D(e.key)},activeKey:o},"style",{position:"relative"}),r.a.createElement(Rn,{key:"1",title:"",onTitleClick:function(e){return D(e.key)},style:{fontSize:"16px",height:"100% "}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(wn.a.Group,{options:[{label:"Location",value:"Location"},{label:"Expiry Date",value:"Expiry Date"},{label:"Time",value:"Time"}],onChange:function(e){a.setState({filters:Object(_t.a)(e)})}}))),r.a.createElement(I.a.Item,{key:"1",style:{position:"absolute",zIndex:"10",top:0,left:0,height:"40px",paddingLeft:"20px"}},"Donations"),r.a.createElement(I.a.Item,{key:"2"},"Nearby Organisations"))),r.a.createElement(h.a,{style:{marginLeft:"280px",marginTop:"64px"}},r.a.createElement(Sn,{className:"site-layout-background",style:{paddingLeft:125,minHeight:280}},function(e){switch(e){case"1":return v;case"2":return C;default:return v}}(o)),r.a.createElement(Tn,{width:300,style:{padding:"25px"}},r.a.createElement("div",{style:{fontWeight:"bolder",paddingBottom:"15px",fontSize:"medium"}},"Pending Donations"),r.a.createElement("div",null,0===this.props.userType.localeCompare("donor")?w:O))),r.a.createElement(g.a,{destroyOnClose:!0,visible:i,title:"Accept Donation",onOk:this.handleOk,onCancel:this.handleCancel,footer:[r.a.createElement(k.a,{key:"back",onClick:this.handleCancel},"Say Thanks"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:l,onClick:this.handleOk,form:"acceptform",htmlType:"submit"},"Submit")]},r.a.createElement(le.a,Object.assign({id:"acceptform"},In,{name:"basic",onFinish:S,onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(le.a.Item,{label:"No of people fed ?",name:"peoplefed",rules:[{required:!0,message:"Please input peoplefed"}]},r.a.createElement($a.a,{min:"1",placeholder:"No. fed"})),r.a.createElement(le.a.Item,{label:"Rate the User",name:"rating",rules:[{required:!0,message:"Please rate the user"}]},r.a.createElement($a.a,{min:"1",max:"5",placeholder:"1 to 5"})))),r.a.createElement(g.a,{footer:[r.a.createElement(k.a,{onClick:function(){return function(e){var t;console.log(null===(t=a.state.pickupDate)||void 0===t?void 0:t.format("HH:mm DD-MM-YYYY"));var n=a.state.pickupDate;console.log(e),a.props.pendingDonation(e,n),a.setState({mapOpen:!1})}(a.state.currentDonation)}},"Done")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(kn,{latitudeP:null===(e=this.state.currentDonation)||void 0===e?void 0:e.location.coordinates[1],longitudeP:null===(t=this.state.currentDonation)||void 0===t?void 0:t.location.coordinates[0],message:"Pickup Point"}),r.a.createElement("div",{style:{marginLeft:"25vw"}},r.a.createElement("p",null,r.a.createElement("br",null),r.a.createElement(y.b,null,"Enter Pickup Date :",r.a.createElement(Oa.a,{format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:ie()("00:00:00","HH:mm:ss")},onChange:function(e){console.log(e),a.setState({pickupDate:e})}}))))))}}]),a}(n.Component),Ln=Object(d.b)((function(e){return{pendingDonorDonation:e.DiscoverReducer.Donations.filter((function(t){var a=e.authReducer.user.userId;return 0==t.status.localeCompare("pending")&&t.donorId==a})),userType:e.authReducer.user.userType,userId:e.authReducer.user.userId,currentfilter:e.DiscoverReducer.currentfilter,Donations:e.DiscoverReducer.Donations.filter((function(e){return 0===e.status.localeCompare("NotAccepted")})),pendingDonations:e.DiscoverReducer.Donations.filter((function(t){var a=e.authReducer.user.userId;return 0==t.status.localeCompare("pending")&&t.receiverId==a})),Organisations:e.DiscoverReducer.Organisations}}),(function(e,t){return{addFed:Object(m.b)(we,e),addHistory:Object(m.b)(Oe,e),getOrganisation:Object(m.b)(xn,e),acceptdonation:Object(m.b)(Ee,e),changeFilters:Object(m.b)(jn,e),pendingDonation:Object(m.b)(Dn,e),rejectDonation:Object(m.b)(Pe,e),getDonation:Object(m.b)(Cn,e),setCurrentRoute:Object(m.b)(G,e)}}))(Pn),Nn=a(670),An=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:ra,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_n=function(e){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/event/");case 2:a=e.sent,console.log(a.data),t({type:"GET_EVENT",payload:a.data.events});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Mn=h.a.Content,Fn=h.a.Sider,Gn=I.a.SubMenu,Hn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedMenuItem:"1",mapOpen:!1,filters:[],lngp:77.209,latp:28.6139},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getEvent();case 3:this.setState({profilePageLoading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this,n=this.state,o=n.selectedMenuItem,i=(n.latp,n.lngp,this.props.Events),l=function(e){var t=a.state.filters;if(t.find((function(e){return 0===e.localeCompare("Time")}))){var n=yn()(e,(function(e){return new ie.a(e.createdAt)}));return console.log(n),n}if(t.find((function(e){return 0===e.localeCompare("Expiry Date")}))){var r=yn()(e,(function(e){return new ie.a(e.expiryTime)}));return console.log(r),r}return e}(i.filter((function(e){return ie()(e.expiryTime).isAfter(ie.a.now())}))),s=function(e){var t;return console.log("this is the action center",a.props.user.userId,"the event donor id is",e.donorId),e.donorId===(null===(t=a.props.user)||void 0===t?void 0:t.userId)?[]:[r.a.createElement(R.b,{to:{pathname:"/messages",state:{user:e.donorId}}},r.a.createElement("p",{className:"text",onClick:function(){a.props.setCurrentRoute("messages")}},r.a.createElement("b",null," Contact Organisor ")))]},c=i.length?l.map((function(e){return r.a.createElement(b.a,{title:r.a.createElement(R.b,{onClick:function(){return a.props.setCurrentRoute("profile")},to:"/profile/".concat(e.donorId)},e.title),extra:r.a.createElement("div",null,r.a.createElement("p",null,"Event Date : ",ie()(e.expiryTime).format(" HH:mm ll"))),style:{width:700,margin:"8px"},actions:s(e)},r.a.createElement("a",{onClick:function(){return a.setState({mapOpen:!0,currentEvent:e})}},r.a.createElement(Nn.a,null)," Event Location "),r.a.createElement("p",null," Event Details : ",e.description),r.a.createElement(y.b,null,(t=e.images).length?t.map((function(e){return r.a.createElement(Z.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var t})):r.a.createElement("div",null,"No Events are currently there!");return this.state.profilePageLoading?r.a.createElement(Ke,null):r.a.createElement(h.a,null,r.a.createElement(Fn,{width:280,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"64px"}},r.a.createElement(I.a,Object(en.a)({mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["1"],style:{height:"100%",borderRight:0},activeKey:o},"style",{position:"relative"}),r.a.createElement(Gn,{key:"1",title:"Events",style:{fontSize:"16px",height:"100% "}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(wn.a.Group,{options:[{label:"Location",value:"Location"},{label:"Date",value:"Expiry Date"},{label:"Time",value:"Time"}],onChange:function(e){a.setState({filters:Object(_t.a)(e)})}}))))),r.a.createElement(h.a,{style:{marginLeft:"280px",marginTop:"64px"}},r.a.createElement(Mn,{className:"site-layout-background",style:{paddingLeft:125,minHeight:280}},c),r.a.createElement(Fn,{width:300,style:{padding:"25px"}}," ")),r.a.createElement(g.a,{footer:[r.a.createElement(k.a,{onClick:function(){return a.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(kn,{latitudeP:null===(e=this.state.currentEvent)||void 0===e?void 0:e.location.coordinates[1],longitudeP:null===(t=this.state.currentEvent)||void 0===t?void 0:t.location.coordinates[0],message:"Event Location"})))}}]),a}(n.Component),zn=Object(d.b)((function(e){return{currentfilter:e.CommunityReducer.currentfilter,Events:e.CommunityReducer.Events,user:e.authReducer.user}}),(function(e,t){return{getEvent:Object(m.b)(_n,e),changeFilters:Object(m.b)(An,e),setCurrentRoute:Object(m.b)(G,e)}}))(Hn),Un=a(325),qn=a(627),Wn=a(629),Vn=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:la,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Yn=function(){return function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/users/leaderboard");case 2:a=e.sent,console.log(a.data),t({type:"GET_LIST",payload:a.data.list});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Bn=h.a.Content,Kn=h.a.Sider,Jn=I.a.SubMenu,Xn={height:"200px",color:"#fff",lineHeight:"30px",textAlign:"center",background:"#364d79",fontSize:"20px"},Zn=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedMenuItem:"1",valueF:"1",filters:[]},e.columns=[{title:"Rank",dataIndex:"rank",key:"rank",render:function(e){return r.a.createElement("p",null,e)}},{title:"Name",dataIndex:"name",key:"name",render:function(t,a){return r.a.createElement(R.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(a.id)},t)}},{title:"Type",key:"tags",dataIndex:"tags",render:function(e){return r.a.createElement(r.a.Fragment,null,e.map((function(e){var t=e.length>5?"geekblue":"green";return"loser"===e&&(t="volcano"),r.a.createElement(Un.a,{color:t,key:e},e.toUpperCase())})))}},{title:"People Fed",dataIndex:"peoplefed",key:"peoplefed"},{title:"Rating",dataIndex:"rating",key:"rating"}],e.onChangeF=function(t){console.log("radio checked",t.target.value),e.setState({valueF:t.target.value})},e.modified=function(e){var t=1;return e.map((function(e){return{rank:t,key:t++,name:e.name,rating:e.rating,peoplefed:e.noFed,type:e.userType,tags:[e.userType],id:e._id}}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n,o,i,l,s,c,u=this.props.data,p=u;console.log(u),u=this.modified(u);var d=this.state,m=d.selectedMenuItem,f=d.valueF;console.log(p[0]);var g={display:"block",height:"30px",lineHeight:"30px",marginLeft:"30px"};return r.a.createElement(h.a,null,r.a.createElement(Kn,{width:280,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"64px"}},r.a.createElement(I.a,Object(en.a)({mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["1"],style:{height:"100%",borderRight:0},activeKey:m},"style",{position:"relative"}),r.a.createElement(Jn,{key:"2",title:"Filter",style:{fontSize:"16px",height:"100% "}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(We.a.Group,{onChange:this.onChangeF,value:f},r.a.createElement(We.a,{style:g,value:1},"People Fed"),r.a.createElement(We.a,{style:g,value:2},"Rating")))))),r.a.createElement(h.a,{style:{marginLeft:"280px",marginTop:"64px"}},r.a.createElement(Bn,{className:"site-layout-background",style:{paddingLeft:125,minHeight:280}},r.a.createElement("div",{style:{width:700,marginTop:"20px"}},r.a.createElement(qn.a,{autoplay:!0},r.a.createElement("div",null," ",r.a.createElement("div",{style:Xn},r.a.createElement("span",{style:{float:"right",marginTop:"25px",marginRight:"15px"}},r.a.createElement(Z.a,{width:170,src:"images\\leaderboard\\leaderboard.png"})),r.a.createElement("p",{style:{paddingTop:"30px",fontSize:"60px"}},"Leaderboard")," ",r.a.createElement("p",null," a look at our top contributors!"))),r.a.createElement("div",null," ",r.a.createElement("div",{style:Xn},r.a.createElement("span",{style:{float:"right",marginTop:"25px",marginRight:"15px"}},r.a.createElement(Z.a,{width:170,src:null===(e=p[0])||void 0===e?void 0:e.profilePic})),r.a.createElement("p",{style:{paddingTop:"30px",fontSize:"30px"}},"1. ",null===(t=p[0])||void 0===t?void 0:t.name," ")," ",r.a.createElement("p",null," fed ",null===(a=p[0])||void 0===a?void 0:a.noFed," people"))),r.a.createElement("div",null," ",r.a.createElement("div",{style:Xn},r.a.createElement("span",{style:{float:"right",marginTop:"25px",marginRight:"15px"}},r.a.createElement(Z.a,{width:170,src:null===(n=p[1])||void 0===n?void 0:n.profilePic})),r.a.createElement("p",{style:{paddingTop:"30px",fontSize:"30px"}},"2. ",null===(o=p[1])||void 0===o?void 0:o.name)," ",r.a.createElement("p",null," fed ",null===(i=p[1])||void 0===i?void 0:i.noFed,"people"))),r.a.createElement("div",null," ",r.a.createElement("div",{style:Xn},r.a.createElement("span",{style:{float:"right",marginTop:"25px",marginRight:"15px"}},r.a.createElement(Z.a,{width:170,src:null===(l=p[2])||void 0===l?void 0:l.profilePic})),r.a.createElement("p",{style:{paddingTop:"30px",fontSize:"30px"}},"3. ",null===(s=p[2])||void 0===s?void 0:s.name)," ",r.a.createElement("p",null," fed ",null===(c=p[2])||void 0===c?void 0:c.noFed," people"))))),r.a.createElement("div",{style:{width:700}},r.a.createElement(Wn.a,{columns:this.columns,dataSource:u}))),r.a.createElement(Kn,{width:300,style:{padding:"25px"}})))}}]),a}(n.Component),$n=Object(d.b)((function(e){return{currentfilter:e.LeaderboardReducer.currentfilter,data:e.LeaderboardReducer.list}}),(function(e){return{setCurrentRoute:Object(m.b)(G,e),getList:Object(m.b)(Yn,e),changeFilters:Object(m.b)(Vn,e)}}))(Zn),Qn=a(644),er=a(326),tr=Object(d.b)((function(e){return{auth:e.authReducer}}))((function(e){var t=e.component,a=e.auth,n=e.my,o=Object(er.a)(e,["component","auth","my"]);return r.a.createElement(l.b,Object.assign({},o,{render:function(e){return!0===a.isAuthenticated?!0===n?r.a.createElement(t,Object.assign({key:"my"},e)):r.a.createElement(t,Object.assign({key:Math.random()},e)):r.a.createElement(l.a,{to:"/login"})}}))})),ar=a(671),nr=a(672),rr=a(163),or=a.n(rr),ir=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onChange=function(t){console.log("radio checked",t.target.value),e.setState({value:t.target.value})},e.openNotificationWithIcon=function(e,t){Qn.a[e]({message:t})},e.onSubmit=function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a),a.password==a.password2){t.next=5;break}e.openNotificationWithIcon("warning","Passwords are not matching"),t.next=19;break;case 5:if(e.state.latlng){t.next=9;break}e.openNotificationWithIcon("warning","Please enter your location"),t.next=19;break;case 9:if("organisation"!=a.userType||0!=e.state.certificates.length){t.next=13;break}e.openNotificationWithIcon("warning","Please upload the certificates"),t.next=19;break;case 13:return console.log("everythhing okay",Object(Lt.a)(Object(Lt.a)({},a),{},{location:e.state.latlng})),console.log(e.state.certificates,a.userType),e.setState({loading:!0}),t.next=18,e.props.registerUser(Object(Lt.a)(Object(Lt.a)({},a),{},{certificates:e.state.certificates,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]}}),e.props.history);case 18:e.setState({loading:!1});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveLatLng=function(t){e.setState({latlng:t})},e.state={errors:{},value:1,mapOpen:!1,latlng:null,certificates:[],loading:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this,t={display:"block",height:"30px",lineHeight:"30px"},a=this.state,n=(a.errors,a.value);return r.a.createElement("div",{style:{paddingTop:"20px",display:"flex",justifyContent:"center"}},r.a.createElement(le.a,{layout:"vertical",style:{width:"500px"},onFinish:this.onSubmit},r.a.createElement(le.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(se.a,{prefix:r.a.createElement(P.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(se.a,{prefix:r.a.createElement(ar.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(nr.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Confirm Password",name:"password2",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(nr.a,{className:"site-form-item-icon"})})),r.a.createElement(se.a,{placeholder:"Location",disabled:!0,value:this.state.latlng?this.state.latlng.lat+" , "+this.state.latlng.lng:"",style:{width:300,marginBottom:"10px"}}),r.a.createElement(k.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(ja.a,null)})," ",r.a.createElement("br",null),r.a.createElement(le.a.Item,{label:"Contact",name:"contact",rules:[{required:!0,message:"Please input your contact!"}]},r.a.createElement(se.a,{prefix:r.a.createElement(Ya.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},r.a.createElement(se.a.TextArea,null)),r.a.createElement(le.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input a brief description!"}]},r.a.createElement(se.a.TextArea,null)),r.a.createElement(le.a.Item,{label:"Choose User type",name:"userType",rules:[{required:!0,message:"Please Choose user type"}]},r.a.createElement(We.a.Group,{onChange:this.onChange,value:n},r.a.createElement(We.a,{style:t,value:"donor"},"Donor"),r.a.createElement(We.a,{style:t,value:"organisation"},"Organisation",r.a.createElement("br",null),"organisation"===n?r.a.createElement("div",{style:{marginLeft:25}},r.a.createElement(ce.a,{multiple:!1,name:"file",accept:"application/pdf",customRequest:function(){var t=Object(x.a)(j.a.mark((function t(a){var n,r,o,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,S.a.post("/upload/certificates",i).then((function(t){e.setState({certificates:[].concat(Object(_t.a)(e.state.certificates),[t.data.location])}),r(t.data)})).catch((function(e){console.log("error in uploading"),o("Error in uploading. Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRemove:function(t){var a=t.response.location,n=e.state.certificates.filter((function(e){return e!=a}));e.setState({certificates:n})}},r.a.createElement("p",null,"Please upload Government issued certificate for your Organisation(in pdf format)"),r.a.createElement(k.a,{icon:r.a.createElement(un.a,null)},"Upload certificates"))):null))),r.a.createElement(le.a.Item,null,r.a.createElement(k.a,{type:"primary",htmlType:"submit"},"Register")," ","Or ",r.a.createElement(R.b,{to:"/login"},"Login now!"))),r.a.createElement(or.a,{footer:[r.a.createElement(k.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(Pa,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),lr=Object(d.b)((function(e){return{auth:e.authReducer,errors:e.authReducer.errors}}),(function(e){return{registerUser:Object(m.b)(ga,e)}}))(Object(l.g)(ir)),sr=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onSubmit=function(){var t=Object(x.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,e.props.loginUser(a);case 3:e.setState({loading:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={errors:{},loading:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/home"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){this.state.errors;return r.a.createElement("div",null,r.a.createElement("div",{style:{paddingTop:"200px",paddingLeft:"100px",height:"100vh",justifyContent:"center",float:"left"}},r.a.createElement("span",{style:{fontSize:"70px",color:"#97033e",marginLeft:"32px"}},r.a.createElement(st.a,null),"nofoodWasted"),r.a.createElement("p",{style:{fontSize:"16px"}},"nofoodWasted is a community-led initiative to help bring about zero hunger. Join now!")),r.a.createElement("div",{style:{paddingTop:"200px",paddingRight:"100px",height:"100vh",justifyContent:"center",float:"right"}},r.a.createElement(le.a,{layout:"vertical",style:{width:"500px"},onFinish:this.onSubmit},r.a.createElement(le.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(se.a,{prefix:r.a.createElement(ar.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(nr.a,{className:"site-form-item-icon"})})),r.a.createElement(le.a.Item,null,r.a.createElement(k.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Log in")," ","Or ",r.a.createElement(R.b,{to:"/register"},"Register now!")))))}}]),a}(n.Component),cr=Object(d.b)((function(e){return{auth:e.authReducer,errors:e.authReducer.errors}}),(function(e){return{loginUser:Object(m.b)(va,e)}}))(sr),ur=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement("div",{style:{marginTop:"40vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},r.a.createElement("p",null,"WELCOME"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(k.a,{type:"primary"},r.a.createElement(R.b,{to:"/login"},"LOGIN")),r.a.createElement(k.a,{style:{marginLeft:"8px"}},r.a.createElement(R.b,{to:"/register"},"REGISTER")))))}}]),a}(n.Component),pr=Object(d.b)((function(e){return{auth:e.authReducer}}))(ur),dr=function(){return r.a.createElement("div",{style:{height:"100vh",paddingTop:"40vh",fontSize:"30px",textAlign:"center"}},"Coming Soon!")},mr=a(320),fr=(a(619),a(107));var hr=function(e){var t=e.message,a=e.currentUser,n=e.you,o=t.sender,i=t.time,l=t.body,s=t.type;return r.a.createElement("div",{style:{width:"100%",paddingLeft:"10px"}},r.a.createElement(Me.a,{author:o===(null===n||void 0===n?void 0:n._id)?n.name:a.name,avatar:r.a.createElement(E.a,{src:o===(null===n||void 0===n?void 0:n._id)?n.avatar:a.avatar,alt:o===(null===n||void 0===n?void 0:n._id)?n.name:a.name}),content:"image"===s?r.a.createElement(Z.a,{width:200,src:l,alt:"image"}):r.a.createElement("p",null,l),datetime:r.a.createElement(fr.a,{title:ie()().format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,ie()(i).fromNow()))}))},gr=h.a.Content,vr=h.a.Sider,br=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={chatMessage:"",currentThread:{},currentUser:{},you:{},requiredUser:null,loading:!1},e.openNotificationWithIcon=function(e,t){Qn.a[e]({message:t})},e.hanleSearchChange=function(t){e.setState({chatMessage:t.target.value})},e.renderCards=function(){return e.state.currentThread.messages&&e.state.currentThread.messages.map((function(t){return r.a.createElement(hr,{key:t._id,message:t,currentUser:e.state.currentUser,you:e.state.you})}))},e.onDrop=function(t){console.log(t);var a=new FormData;a.append("file",t[0]),S.a.post("upload/messages",a,{header:{"content-type":"multipart/form-data"}}).then((function(t){if(t.data.success){var a,n=t.data.location,r=null===(a=e.state.currentThread)||void 0===a?void 0:a._id;r?e.props.sendMessage(r,n,"image"):e.openNotificationWithIcon("warning","Please select a user to send the message")}}))},e.submitChatMessage=function(t){var a;t.preventDefault();var n=e.state.chatMessage,r=null===(a=e.state.currentThread)||void 0===a?void 0:a._id;r?(e.props.sendMessage(r,n,"text"),e.setState({chatMessage:""})):e.openNotificationWithIcon("warning","Please select a user to send the message")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),this.props.location.state&&this.setState({requiredUser:this.props.location.state.user}),e.next=4,this.props.getThreads();case 4:this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.messagesEnd&&this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"componentWillReceiveProps",value:function(e){var t,a=this,n=null===(t=this.state.currentThread)||void 0===t?void 0:t._id;if(n){var r=e.threads.find((function(e){return e._id==n}));r&&this.setState({currentThread:r})}else if(this.state.requiredUser){var o=e.threads.find((function(e){return!!(null===e||void 0===e?void 0:e.members.find((function(e){return e._id==a.state.requiredUser})))}));if(o){var i=o.members.find((function(e){return e._id!=a.props.user.userId})),l=o.members.find((function(e){return e._id==a.props.user.userId}));this.setState({currentThread:o,requiredUser:null,currentUser:i,you:l})}else this.props.startThread(this.state.requiredUser)}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.loading?r.a.createElement(Ke,null):r.a.createElement(h.a,{style:{height:"100vh",paddingTop:"84px",margin:"auto"}},r.a.createElement(h.a,{style:{}},r.a.createElement(vr,{width:300,className:"site-layout-background"},r.a.createElement(v.b,{style:{paddingLeft:"10px"},itemLayout:"horizontal",dataSource:this.props.threads,renderItem:function(t){var a=t.members.find((function(t){return t._id!=e.props.user.userId})),n=t.members.find((function(t){return t._id==e.props.user.userId}));return r.a.createElement(v.b.Item,{style:e.state.currentThread._id==t._id?{background:"#FFF",border:"1px solid #DDD",cursor:"pointer",padding:"4px 8px"}:{cursor:"pointer",padding:"4px 8px"},key:t._id,onClick:function(){return e.setState({currentThread:t,currentUser:a,you:n})}},r.a.createElement(v.b.Item.Meta,{avatar:r.a.createElement(E.a,{src:a.avatar}),title:a.name,description:t.messages.length?"text"==t.messages[t.messages.length-1].type?t.messages[t.messages.length-1].body:"Image":""}))}})),r.a.createElement(h.a,{style:{width:"60vw",padding:"0 24px 24px"}},r.a.createElement(gr,{style:{margin:0}},r.a.createElement("div",{class:"site-layout-background",style:{paddingLeft:"0px",maxWidth:"860px"}},r.a.createElement("div",{className:"infinite-container",style:{height:"570px",overflowY:"scroll"}},this.state.currentThread&&this.renderCards(),r.a.createElement("div",{ref:function(t){e.messagesEnd=t},style:{float:"left",clear:"both",paddingLeft:"30px"}})),r.a.createElement(ka.a,{gutter:12},r.a.createElement(le.a,{style:{width:"100%",marginTop:"10px",marginBottom:"12px",marginLeft:"10px"},layout:"inline",onSubmit:this.submitChatMessage},r.a.createElement(wa.a,{span:18},r.a.createElement(se.a,{id:"message",prefix:r.a.createElement(mt.a,null),placeholder:"Let's start talking",type:"text",value:this.state.chatMessage,onChange:this.hanleSearchChange})),r.a.createElement(wa.a,{span:2},r.a.createElement(mr.a,{onDrop:this.onDrop},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement(k.a,{style:{width:"100%"}},r.a.createElement(un.a,null))))}))),r.a.createElement(wa.a,{span:3},r.a.createElement(k.a,{type:"primary",style:{width:"100%"},onClick:this.submitChatMessage,htmlType:"submit"},r.a.createElement(Ka.a,null)))))))))))}}]),a}(n.Component),Er=Object(d.b)((function(e){return{threads:e.messageReducer.threads,user:e.authReducer.user}}),(function(e){return{getThreads:Object(m.b)(xt,e),startThread:Object(m.b)(St,e),sendMessage:Object(m.b)(Dt,e),updateThread:Object(m.b)(Ct,e)}}))(br);if(localStorage.jwtToken){var yr=localStorage.jwtToken;ht(yr);var Or=Object(gt.a)(yr);ma.dispatch(ba(Or)),console.log("the main guyYYY");var kr=Date.now()/1e3;Or.exp<kr&&(ma.dispatch(Ea()),window.location.href="./login"),ma.dispatch(G("home")),ha()}var wr=Object(d.b)((function(e){return{errors:e.authReducer.errors}}),(function(e){return{clearErrors:Object(m.b)(ya,e)}}))((function(e){return Object(n.useEffect)((function(){var t,a,n;(null===(t=e.errors)||void 0===t?void 0:t.message)&&(a="error",n=e.errors.message,Qn.a[a]({message:n}),e.clearErrors())}),[e.errors]),r.a.createElement(h.a,null,r.a.createElement(za,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:pr}),r.a.createElement(l.b,{exact:!0,path:"/register",component:lr}),r.a.createElement(l.b,{exact:!0,path:"/login",component:cr}),r.a.createElement(l.d,null,r.a.createElement(tr,{exact:!0,path:"/home",component:ot}),r.a.createElement(tr,{exact:!0,path:"/i/profile/:id",component:bn,my:!0}),r.a.createElement(tr,{exact:!0,path:"/profile/:id",component:bn}),r.a.createElement(tr,{exact:!0,path:"/discover",component:Ln}),r.a.createElement(tr,{exact:!0,path:"/messages",component:Er}),r.a.createElement(tr,{exact:!0,path:"/community",component:zn}),r.a.createElement(tr,{exact:!0,path:"/leaderboard",component:$n}),r.a.createElement(l.b,{path:"/",component:dr}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var jr=a(317);a(620),"".concat("","/light-theme.css");i.a.render(r.a.createElement(d.a,{store:ma},r.a.createElement(R.a,null,r.a.createElement(jr.a,{persistor:fa},r.a.createElement(wr,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[329,1,2]]]);
//# sourceMappingURL=main.9d8f5f27.chunk.js.map